function module(t){try{return angular.module(t)}catch(e){return angular.module(t,[])}}angular.module("yatayat",["ionic","ngCordova","yatayat.factories","yatayat.controllers"]).run(["$ionicPlatform","$cordovaSplashscreen",function(t,e){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault(),window.cordova&&setTimeout(function(){e.hide()},2e3)})}]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/start"),t.state("start",{url:"/start",templateUrl:"templates/start.html",controller:"StartCtrl"}).state("app",{url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AppCtrl"}).state("app.posts",{url:"/posts",views:{menuContent:{templateUrl:"templates/posts.html",controller:"PostsCtrl"}}}).state("app.post",{url:"/posts/:postId",views:{menuContent:{templateUrl:"templates/post.html",controller:"PostCtrl"}}}).state("app.report",{url:"/report",views:{menuContent:{templateUrl:"templates/report.html",controller:"ReportCtrl"}}}).state("app.search",{url:"/search",views:{menuContent:{templateUrl:"templates/search.html",controller:"SearchCtrl"}}})}]).config(["$httpProvider",function(t){t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded"}]),module("yatayat.factories").factory("BaseModel",[function(){return{build:function(t){var e=Object.create(this);return angular.extend(e,t),e}}}]),module("yatayat.factories").factory("Loading",["$ionicLoading",function(t){return{show:function(){t.show({template:"<img src='img/spinner.gif'>"})},hide:function(){t.hide()}}}]),module("yatayat.factories").factory("Modal",["$ionicModal",function(t){return{setup:function(e,o){t.fromTemplateUrl(o,{scope:e}).then(function(t){e.modal=t}),e.closeModal=function(){e.modal.hide()},e.showModal=function(){e.modal.show()}}}}]),module("yatayat.factories").factory("Navigator",["$state","$ionicViewService",function(t,e){return{go:function(o,r){t.go(o).then(function(){r&&e.clearHistory()})}}}]),module("yatayat.factories").factory("Post",["BaseModel","Raven",function(t){var e=[{id:1,title:"Accident at Koteshwor",description:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},{id:2,title:"Road Block at Sallaghari",description:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}];return angular.extend(t,{all:function(o){var r=[];angular.forEach(e,function(e){r.push(t.build(e))}),o(r)},get:function(o,r){var n=e.filter(function(t){return t.id===parseInt(o)})[0];r(t.build(n))},descLength:function(){return this.description.length}})}]),module("yatayat.factories").factory("Raven",["$http","$q",function(t,e){var o="http://192.168.1.2:3000/";return{get:function(r){var n=e.defer();return t.get(o+r).success(function(t){n.resolve(t)}),n.promise},post:function(r,n){var a=e.defer();return t({url:o+r,method:"POST",data:$.param(n)}).then(function(){a.resolve()}),a.promise}}}]),module("yatayat.factories").factory("Sim",["$q",function(t){return{getDetails:function(){var e=t.defer();if("undefined"!=typeof cordova){var o=cordova.require("cordova/plugin/telephonenumber");o.get(function(t){e.resolve(t)})}else e.resolve({simSerialNumber:"abcd"});return e.promise}}}]),module("yatayat.factories").factory("User",["Raven","$q","Sim",function(t,e,o){return{checkRegistration:function(){var r=e.defer();return o.getDetails().then(function(e){t.get("users/"+e.simSerialNumber).then(function(t){t.id&&r.resolve(t)})}),r.promise},register:function(o,r){var n=e.defer(),a={};return a.sim_serial_number=o,r&&(a.phone_number=r),t.post("users",{user:a}).then(function(){n.resolve()}),n.promise}}}]),module("yatayat.factories").factory("Validator",[function(){return{isValidPhone:function(t){var e=/^\d{10}$/;return t.match(e)}}}]),module("yatayat.controllers").controller("AppCtrl",["$scope","$rootScope","Modal","$timeout",function(t,e,o,r){t.loginData={},o.setup(t,"templates/login.html"),t.login=function(){t.showModal()},t.closeLogin=function(){t.closeModal()},t.doLogin=function(){console.log("Doing login",t.loginData),r(function(){t.closeLogin()},1e3)}}]),module("yatayat.controllers").controller("PostCtrl",["$scope","$stateParams","Post",function(t,e,o){t.post={},o.get(e.postId,function(e){t.post=e})}]),module("yatayat.controllers").controller("PostsCtrl",["$scope","Post",function(t,e){t.posts=[],e.all(function(e){t.posts=e}),t.likePost=function(t,e){e.preventDefault()},t.editPost=function(t,e){e.preventDefault()}}]),module("yatayat.controllers").controller("ReportCtrl",["$scope","$stateParams",function(){}]),module("yatayat.controllers").controller("SearchCtrl",["$scope","$stateParams",function(){}]),module("yatayat.controllers").controller("StartCtrl",["$scope","$rootScope","User","Sim","Modal","Navigator","Loading","$ionicPopup","Validator",function(t,e,o,r,n,a,i,l){n.setup(t,"templates/tos.html"),t.enterMain=function(t){e.userId=t,a.go("app.posts",!0)},o.checkRegistration().then(function(e){t.enterMain(e.sim_serial_number)}),t.registerWithCredentials=function(e,r){o.register(e,r).then(function(){l.alert({title:"Success",template:e+" registered successfully."}).then(function(){t.enterMain(e)})})},t.register=function(){r.getDetails().then(function(e){t.registerWithCredentials(e.simSerialNumber,e.line1Number)})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluaXQuanMiLCJhcHAuanMiLCJmYWN0b3JpZXMvYmFzZV9tb2RlbC5qcyIsImZhY3Rvcmllcy9sb2FkaW5nLmpzIiwiZmFjdG9yaWVzL21vZGFsLmpzIiwiZmFjdG9yaWVzL25hdmlnYXRvci5qcyIsImZhY3Rvcmllcy9wb3N0LmpzIiwiZmFjdG9yaWVzL3JhdmVuLmpzIiwiZmFjdG9yaWVzL3NpbS5qcyIsImZhY3Rvcmllcy91c2VyLmpzIiwiZmFjdG9yaWVzL3ZhbGlkYXRvci5qcyIsImNvbnRyb2xsZXJzL2FwcF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcG9zdF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcG9zdHNfY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3JlcG9ydF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvc2VhcmNoX2NvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9zdGFydF9jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFFBQUEsUUFBQSxHQUNBLElBQ0EsTUFBQSxTQUFBLE9BQUEsR0FDQSxNQUFBLEdBQ0EsTUFBQSxTQUFBLE9BQUEsT0NNQSxRQUFBLE9BQUEsV0FBQSxRQUFBLFlBQUEsb0JBQUEsd0JBRUEsS0FBQSxpQkFBQSx1QkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLE1BQUEsV0FHQSxPQUFBLFNBQUEsT0FBQSxRQUFBLFFBQUEsVUFDQSxRQUFBLFFBQUEsU0FBQSwwQkFBQSxHQUVBLE9BQUEsV0FFQSxVQUFBLGVBR0EsT0FBQSxTQUFBLFdBQUEsV0FDQSxFQUFBLFFBQ0EsVUFHQSxRQUFBLGlCQUFBLHFCQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxVQUVBLEVBQ0EsTUFBQSxTQUNBLElBQUEsU0FDQSxZQUFBLHVCQUNBLFdBQUEsY0FHQSxNQUFBLE9BQ0EsSUFBQSxPQUNBLFlBQUEsRUFDQSxZQUFBLHNCQUNBLFdBQUEsWUFHQSxNQUFBLGFBQ0EsSUFBQSxTQUNBLE9BQ0EsYUFDQSxZQUFBLHVCQUNBLFdBQUEsZ0JBS0EsTUFBQSxZQUNBLElBQUEsaUJBQ0EsT0FDQSxhQUNBLFlBQUEsc0JBQ0EsV0FBQSxlQUtBLE1BQUEsY0FDQSxJQUFBLFVBQ0EsT0FDQSxhQUNBLFlBQUEsd0JBQ0EsV0FBQSxpQkFLQSxNQUFBLGNBQ0EsSUFBQSxVQUNBLE9BQ0EsYUFDQSxZQUFBLHdCQUNBLFdBQUEsb0JBTUEsUUFBQSxnQkFBQSxTQUFBLEdBRUEsRUFBQSxTQUFBLFFBQUEsS0FBQSxnQkFBQSx1Q0MxRkEsT0FBQSxxQkFFQSxRQUFBLGFBQUEsV0FDQSxPQUVBLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxPQUFBLE9BQUEsS0FFQSxPQURBLFNBQUEsT0FBQSxFQUFBLEdBQ0EsT0NSQSxPQUFBLHFCQUVBLFFBQUEsV0FBQSxnQkFBQSxTQUFBLEdBQ0EsT0FDQSxLQUFBLFdBQ0EsRUFBQSxNQUFBLFNBQUEsaUNBR0EsS0FBQSxXQUNBLEVBQUEsWUNUQSxPQUFBLHFCQUVBLFFBQUEsU0FBQSxjQUFBLFNBQUEsR0FDQSxPQU9BLE1BQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxnQkFBQSxHQUNBLE1BQUEsSUFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsSUFHQSxFQUFBLFdBQUEsV0FDQSxFQUFBLE1BQUEsUUFHQSxFQUFBLFVBQUEsV0FDQSxFQUFBLE1BQUEsYUN0QkEsT0FBQSxxQkFFQSxRQUFBLGFBQUEsU0FBQSxvQkFBQSxTQUFBLEVBQUEsR0FDQSxPQUNBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEdBQUEsS0FBQSxXQUNBLEdBQUEsRUFBQSxzQkNOQSxPQUFBLHFCQUVBLFFBQUEsUUFBQSxZQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsS0FDQSxHQUFBLEVBQUEsTUFBQSx3QkFBQSxZQUFBLG1jQUNBLEdBQUEsRUFBQSxNQUFBLDJCQUFBLFlBQUEsa2NBR0EsT0FBQSxTQUFBLE9BQUEsR0FDQSxJQUFBLFNBQUEsR0FDQSxHQUFBLEtBQ0EsU0FBQSxRQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE1BQUEsTUFFQSxFQUFBLElBR0EsSUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxPQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLEtBQUEsRUFDQSxHQUFBLEVBQUEsTUFBQSxLQUdBLFdBQUEsV0FDQSxNQUFBLE1BQUEsWUFBQSxhQ3ZCQSxPQUFBLHFCQUVBLFFBQUEsU0FBQSxRQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLDBCQUNBLFFBQ0EsSUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FPQSxPQUxBLEdBQUEsSUFBQSxFQUFBLEdBQ0EsUUFBQSxTQUFBLEdBQ0EsRUFBQSxRQUFBLEtBR0EsRUFBQSxTQUdBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FVQSxPQVJBLElBQ0EsSUFBQSxFQUFBLEVBQ0EsT0FBQSxPQUNBLEtBQUEsRUFBQSxNQUFBLEtBQ0EsS0FBQSxXQUNBLEVBQUEsWUFHQSxFQUFBLGFDM0JBLE9BQUEscUJBRUEsUUFBQSxPQUFBLEtBQUEsU0FBQSxHQUNBLE9BQ0EsV0FBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLE9BQ0EsSUFBQSxtQkFBQSxTQUFBLENBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxpQ0FDQSxHQUFBLElBQUEsU0FBQSxHQUNBLEVBQUEsUUFBQSxTQUdBLEdBQUEsU0FBQSxnQkFBQSxRQUVBLE9BQUEsR0FBQSxhQ2RBLE9BQUEscUJBRUEsUUFBQSxRQUFBLFFBQUEsS0FBQSxNQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsT0FDQSxrQkFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLE9BUUEsT0FQQSxHQUFBLGFBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxJQUFBLFNBQUEsRUFBQSxpQkFDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxRQUFBLE9BR0EsRUFBQSxTQUdBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsUUFFQSxJQVlBLE9BWEEsR0FBQSxrQkFBQSxFQUNBLElBQ0EsRUFBQSxhQUFBLEdBR0EsRUFBQSxLQUFBLFNBQ0EsS0FBQSxJQUVBLEtBQUEsV0FDQSxFQUFBLFlBRUEsRUFBQSxhQy9CQSxPQUFBLHFCQUVBLFFBQUEsYUFBQSxXQUNBLE9BQ0EsYUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFVBQ0EsT0FBQSxHQUFBLE1BQUEsUUNOQSxPQUFBLHVCQUVBLFdBQUEsV0FBQSxTQUFBLGFBQUEsUUFBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLGFBRUEsRUFBQSxNQUFBLEVBQUEsd0JBRUEsRUFBQSxNQUFBLFdBQ0EsRUFBQSxhQUlBLEVBQUEsV0FBQSxXQUNBLEVBQUEsY0FJQSxFQUFBLFFBQUEsV0FDQSxRQUFBLElBQUEsY0FBQSxFQUFBLFdBSUEsRUFBQSxXQUNBLEVBQUEsY0FDQSxTQ3pCQSxPQUFBLHVCQUVBLFdBQUEsWUFBQSxTQUFBLGVBQUEsT0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsUUFFQSxFQUFBLElBQUEsRUFBQSxPQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsT0NOQSxPQUFBLHVCQUVBLFdBQUEsYUFBQSxTQUFBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUVBLEVBQUEsSUFBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLElBR0EsRUFBQSxTQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsa0JBR0EsRUFBQSxTQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEscUJDZEEsT0FBQSx1QkFFQSxXQUFBLGNBQUEsU0FBQSxlQUFBLGVDRkEsT0FBQSx1QkFFQSxXQUFBLGNBQUEsU0FBQSxlQUFBLGVDRkEsT0FBQSx1QkFFQSxXQUFBLGFBQ0EsU0FBQSxhQUFBLE9BQUEsTUFBQSxRQUFBLFlBQUEsVUFBQSxjQUFBLFlBQ0EsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxNQUFBLEVBQUEsc0JBRUEsRUFBQSxVQUFBLFNBQUEsR0FDQSxFQUFBLE9BQUEsRUFDQSxFQUFBLEdBQUEsYUFBQSxJQUdBLEVBQUEsb0JBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLEVBQUEscUJBR0EsRUFBQSx3QkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsV0FDQSxFQUFBLE9BQ0EsTUFBQSxVQUNBLFNBQUEsRUFBQSw4QkFDQSxLQUFBLFdBQ0EsRUFBQSxVQUFBLFFBS0EsRUFBQSxTQUFBLFdBQ0EsRUFBQSxhQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsd0JBQUEsRUFBQSxnQkFBQSxFQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIG1vZHVsZShuYW1lKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGFuZ3VsYXIubW9kdWxlKG5hbWUpXG4gIH0gY2F0Y2goZXJyKSB7XG4gICAgcmV0dXJuIGFuZ3VsYXIubW9kdWxlKG5hbWUsIFtdKVxuICB9XG59XG5cbiIsIi8vIFlhdGF5YXRcbi8qKlxuICogQGF1dGhvcjoga29pcmFsYS5zYWRpeGFAZ21haWwuY29tXG4gKiBAdGVhbTogeWF0YXlhdFxuICogQ29weXJpZ2h0IDIwMTQsIEBzYWRpeGFuYW51XG4gKiovXG4vLyBhbmd1bGFyLm1vZHVsZSBpcyBhIGdsb2JhbCBwbGFjZSBmb3IgY3JlYXRpbmcsIHJlZ2lzdGVyaW5nIGFuZCByZXRyaWV2aW5nIEFuZ3VsYXIgbW9kdWxlc1xuLy8gJ3lhdGF5YXQnIGlzIHRoZSBuYW1lIG9mIHRoaXMgYW5ndWxhciBtb2R1bGUgZXhhbXBsZSAoYWxzbyBzZXQgaW4gYSA8Ym9keT4gYXR0cmlidXRlIGluIGluZGV4Lmh0bWwpXG4vLyB0aGUgMm5kIHBhcmFtZXRlciBpcyBhbiBhcnJheSBvZiAncmVxdWlyZXMnXG4vLyAneWF0YXlhdC5jb250cm9sbGVycycgaXMgZm91bmQgaW4gY29udHJvbGxlcnMuanNcbmFuZ3VsYXIubW9kdWxlKCd5YXRheWF0JywgWydpb25pYycsICduZ0NvcmRvdmEnLCAneWF0YXlhdC5mYWN0b3JpZXMnLCAneWF0YXlhdC5jb250cm9sbGVycyddKVxuXG4ucnVuKGZ1bmN0aW9uKCRpb25pY1BsYXRmb3JtLCAkY29yZG92YVNwbGFzaHNjcmVlbikge1xuICAkaW9uaWNQbGF0Zm9ybS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAvLyBIaWRlIHRoZSBhY2Nlc3NvcnkgYmFyIGJ5IGRlZmF1bHQgKHJlbW92ZSB0aGlzIHRvIHNob3cgdGhlIGFjY2Vzc29yeSBiYXIgYWJvdmUgdGhlIGtleWJvYXJkXG4gICAgLy8gZm9yIGZvcm0gaW5wdXRzKVxuICAgIGlmKHdpbmRvdy5jb3Jkb3ZhICYmIHdpbmRvdy5jb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQpIHtcbiAgICAgIGNvcmRvdmEucGx1Z2lucy5LZXlib2FyZC5oaWRlS2V5Ym9hcmRBY2Nlc3NvcnlCYXIodHJ1ZSk7XG4gICAgfVxuICAgIGlmKHdpbmRvdy5TdGF0dXNCYXIpIHtcbiAgICAgIC8vIG9yZy5hcGFjaGUuY29yZG92YS5zdGF0dXNiYXIgcmVxdWlyZWRcbiAgICAgIFN0YXR1c0Jhci5zdHlsZURlZmF1bHQoKTtcbiAgICB9XG5cbiAgICB3aW5kb3cuY29yZG92YSAmJiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJGNvcmRvdmFTcGxhc2hzY3JlZW4uaGlkZSgpO1xuICAgIH0sIDIwMDApO1xuICB9KTtcbn0pXG4uY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgc3RhdGVzIGFyZSBtYXRjaGVkLCB1c2UgdGhpcyBhcyB0aGUgZmFsbGJhY2tcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL3N0YXJ0Jyk7XG5cbiAgJHN0YXRlUHJvdmlkZXJcbiAgICAuc3RhdGUoJ3N0YXJ0Jywge1xuICAgICAgdXJsOiAnL3N0YXJ0JyxcbiAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3N0YXJ0Lmh0bWwnLFxuICAgICAgY29udHJvbGxlcjogJ1N0YXJ0Q3RybCdcbiAgICB9KVxuXG4gICAgLnN0YXRlKCdhcHAnLCB7XG4gICAgICB1cmw6ICcvYXBwJyxcbiAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvbWVudS5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXI6ICdBcHBDdHJsJ1xuICAgIH0pXG5cbiAgICAuc3RhdGUoJ2FwcC5wb3N0cycsIHtcbiAgICAgIHVybDogJy9wb3N0cycsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWVudUNvbnRlbnQnIDp7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvcG9zdHMuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1Bvc3RzQ3RybCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAuc3RhdGUoJ2FwcC5wb3N0Jywge1xuICAgICAgdXJsOiAnL3Bvc3RzLzpwb3N0SWQnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21lbnVDb250ZW50JyA6e1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3Bvc3QuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1Bvc3RDdHJsJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIC5zdGF0ZSgnYXBwLnJlcG9ydCcsIHtcbiAgICAgIHVybDogJy9yZXBvcnQnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ21lbnVDb250ZW50JyA6e1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3JlcG9ydC5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnUmVwb3J0Q3RybCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAuc3RhdGUoJ2FwcC5zZWFyY2gnLCB7XG4gICAgICB1cmw6ICcvc2VhcmNoJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtZW51Q29udGVudCcgOntcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9zZWFyY2guaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1NlYXJjaEN0cmwnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG59KVxuLmNvbmZpZyhbJyRodHRwUHJvdmlkZXInLCBmdW5jdGlvbiAoJGh0dHBQcm92aWRlcikge1xuICAvLyAkaHR0cC5wb3N0IGRvZXNuJ3Qgc2VuZCBkYXRhIGZpeFxuICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJztcblxuICAvLyBSZXNldCBoZWFkZXJzIHRvIGF2b2lkIE9QVElPTlMgcmVxdWVzdCAoYWthIHByZWZsaWdodClcbiAgLy8gJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbiA9IHt9O1xuICAvLyAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucG9zdCA9IHt9O1xuICAvLyAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucHV0ID0ge307XG4gIC8vICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wYXRjaCA9IHt9O1xufV0pXG5cbiIsIm1vZHVsZSgneWF0YXlhdC5mYWN0b3JpZXMnKVxuXG4uZmFjdG9yeSgnQmFzZU1vZGVsJywgW2Z1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIC8vIGV4dGVuZCBhbmd1bGFyIGZhY3Rvcnkgb2JqZWN0KG1vZGVsKSB3aXRoIGFueSAnbW9kZWwgbGlrZScgb2JqZWN0KGRhdGEpXG4gICAgYnVpbGQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBtb2RlbCA9IE9iamVjdC5jcmVhdGUodGhpcyk7XG4gICAgICBhbmd1bGFyLmV4dGVuZChtb2RlbCwgZGF0YSk7XG4gICAgICByZXR1cm4gbW9kZWw7XG4gICAgfVxuICB9XG59XSlcblxuIiwibW9kdWxlKCd5YXRheWF0LmZhY3RvcmllcycpXG5cbi5mYWN0b3J5KCdMb2FkaW5nJywgWyckaW9uaWNMb2FkaW5nJywgZnVuY3Rpb24oJGlvbmljTG9hZGluZykge1xuICByZXR1cm4ge1xuICAgIHNob3c6IGZ1bmN0aW9uKCkge1xuICAgICAgJGlvbmljTG9hZGluZy5zaG93KHt0ZW1wbGF0ZTogXCI8aW1nIHNyYz0naW1nL3NwaW5uZXIuZ2lmJz5cIn0pO1xuICAgIH0sXG5cbiAgICBoaWRlOiBmdW5jdGlvbigpIHtcbiAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgIH1cbiAgfVxufV0pXG5cbiIsIm1vZHVsZSgneWF0YXlhdC5mYWN0b3JpZXMnKVxuXG4uZmFjdG9yeSgnTW9kYWwnLCBbJyRpb25pY01vZGFsJywgZnVuY3Rpb24oJGlvbmljTW9kYWwpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBTZXR1cCBhIG1vZGFsIGZvciBhbnkgY29udHJvbGxlclxuICAgICAqIEBwYXJhbXM6XG4gICAgICogJHNjb3BlIFtPYmplY3RdIHRoZSBjb250cm9sbGVyJ3Mgc2NvcGUgb2JqZWN0XG4gICAgICogdGVtcGxhdGVVcmwgW1N0cmluZ10gdGhlIHBhdGggdG8gdGhlIG1vZGFsIHRlbXBsYXRlXG4gICAgICoqL1xuICAgIHNldHVwOiBmdW5jdGlvbigkc2NvcGUsIHRlbXBsYXRlVXJsKSB7XG4gICAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwodGVtcGxhdGVVcmwsIHtcbiAgICAgICAgc2NvcGU6ICRzY29wZVxuICAgICAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICAgICAkc2NvcGUubW9kYWwgPSBtb2RhbDtcbiAgICAgIH0pO1xuXG4gICAgICAkc2NvcGUuY2xvc2VNb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUubW9kYWwuaGlkZSgpO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnNob3dNb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUubW9kYWwuc2hvdygpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cbn1dKVxuXG4iLCJtb2R1bGUoJ3lhdGF5YXQuZmFjdG9yaWVzJylcblxuLmZhY3RvcnkoJ05hdmlnYXRvcicsIFsnJHN0YXRlJywgJyRpb25pY1ZpZXdTZXJ2aWNlJywgZnVuY3Rpb24oJHN0YXRlLCAkaW9uaWNWaWV3U2VydmljZSkge1xuICByZXR1cm4ge1xuICAgIGdvOiBmdW5jdGlvbihzdGF0ZSwgY2xlYXJIaXN0b3J5KSB7XG4gICAgICAkc3RhdGUuZ28oc3RhdGUpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGNsZWFySGlzdG9yeSAmJiAkaW9uaWNWaWV3U2VydmljZS5jbGVhckhpc3RvcnkoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufV0pXG5cbiIsIm1vZHVsZSgneWF0YXlhdC5mYWN0b3JpZXMnKVxuXG4uZmFjdG9yeSgnUG9zdCcsIFsnQmFzZU1vZGVsJywgJ1JhdmVuJywgZnVuY3Rpb24oQmFzZU1vZGVsLCBSYXZlbikge1xuICB2YXIgcG9zdHMgPSBbXG4gICAgeyBpZDogMSwgdGl0bGU6ICdBY2NpZGVudCBhdCBLb3Rlc2h3b3InLCBkZXNjcmlwdGlvbjogJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LCBzZWQgZG8gZWl1c21vZCB0ZW1wb3IgaW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS4gVXQgZW5pbSBhZCBtaW5pbSB2ZW5pYW0sIHF1aXMgbm9zdHJ1ZCBleGVyY2l0YXRpb24gdWxsYW1jbyBsYWJvcmlzIG5pc2kgdXQgYWxpcXVpcCBleCBlYSBjb21tb2RvIGNvbnNlcXVhdC4gRHVpcyBhdXRlIGlydXJlIGRvbG9yIGluIHJlcHJlaGVuZGVyaXQgaW4gdm9sdXB0YXRlIHZlbGl0IGVzc2UgY2lsbHVtIGRvbG9yZSBldSBmdWdpYXQgbnVsbGEgcGFyaWF0dXIuIEV4Y2VwdGV1ciBzaW50IG9jY2FlY2F0IGN1cGlkYXRhdCBub24gcHJvaWRlbnQsIHN1bnQgaW4gY3VscGEgcXVpIG9mZmljaWEgZGVzZXJ1bnQgbW9sbGl0IGFuaW0gaWQgZXN0IGxhYm9ydW0uJ30sXG4gICAgeyBpZDogMiwgdGl0bGU6ICdSb2FkIEJsb2NrIGF0IFNhbGxhZ2hhcmknLCBkZXNjcmlwdGlvbjogJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LCBzZWQgZG8gZWl1c21vZCB0ZW1wb3IgaW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS4gVXQgZW5pbSBhZCBtaW5pbSB2ZW5pYW0sIHF1aXMgbm9zdHJ1ZCBleGVyY2l0YXRpb24gdWxsYW1jbyBsYWJvcmlzIG5pc2kgdXQgYWxpcXVpcCBleCBlYSBjb21tb2RvIGNvbnNlcXVhdC4gRHVpcyBhdXRlIGlydXJlIGRvbG9yIGluIHJlcHJlaGVuZGVyaXQgaW4gdm9sdXB0YXRlIHZlbGl0IGVzc2UgY2lsbHVtIGRvbG9yZSBldSBmdWdpYXQgbnVsbGEgcGFyaWF0dXIuIEV4Y2VwdGV1ciBzaW50IG9jY2FlY2F0IGN1cGlkYXRhdCBub24gcHJvaWRlbnQsIHN1bnQgaW4gY3VscGEgcXVpIG9mZmljaWEgZGVzZXJ1bnQgbW9sbGl0IGFuaW0gaWQgZXN0IGxhYm9ydW0uJ30sXG4gIF07XG5cbiAgcmV0dXJuIGFuZ3VsYXIuZXh0ZW5kKEJhc2VNb2RlbCwge1xuICAgIGFsbDogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHZhciBkYXRhID0gW107XG4gICAgICBhbmd1bGFyLmZvckVhY2gocG9zdHMsIGZ1bmN0aW9uKHBvc3QpIHtcbiAgICAgICAgZGF0YS5wdXNoKEJhc2VNb2RlbC5idWlsZChwb3N0KSk7XG4gICAgICB9KTtcbiAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgIH0sXG5cbiAgICBnZXQ6IGZ1bmN0aW9uKGlkLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGRhdGEgPSBwb3N0cy5maWx0ZXIoZnVuY3Rpb24obSkgeyByZXR1cm4gbS5pZCA9PT0gcGFyc2VJbnQoaWQpIH0pWzBdO1xuICAgICAgY2FsbGJhY2soQmFzZU1vZGVsLmJ1aWxkKGRhdGEpKTtcbiAgICB9LFxuXG4gICAgZGVzY0xlbmd0aDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbi5sZW5ndGg7XG4gICAgfVxuICB9KTsgLy8gZW5kIGFuZ3VsYXIuZXh0ZW5kLi5cbn1dKVxuXG4iLCJtb2R1bGUoJ3lhdGF5YXQuZmFjdG9yaWVzJylcblxuLmZhY3RvcnkoJ1JhdmVuJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uKCRodHRwLCAkcSkge1xuICB2YXIgYmFzZVVybCA9ICdodHRwOi8vMTkyLjE2OC4xLjI6MzAwMC8nO1xuICByZXR1cm4ge1xuICAgIGdldDogZnVuY3Rpb24ocGF0aCkge1xuICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcblxuICAgICAgJGh0dHAuZ2V0KGJhc2VVcmwgKyBwYXRoKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgIGRlZmVyLnJlc29sdmUocmVzdWx0KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgcG9zdDogZnVuY3Rpb24ocGF0aCwgZGF0YSkge1xuICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcblxuICAgICAgJGh0dHAoe1xuICAgICAgICB1cmw6IGJhc2VVcmwgKyBwYXRoLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgZGF0YTogJC5wYXJhbShkYXRhKSxcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGRlZmVyLnJlc29sdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICB9XG4gIH1cbn1dKVxuXG4iLCJtb2R1bGUoJ3lhdGF5YXQuZmFjdG9yaWVzJylcblxuLmZhY3RvcnkoJ1NpbScsIFsnJHEnLCBmdW5jdGlvbigkcSkge1xuICByZXR1cm4ge1xuICAgIGdldERldGFpbHM6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgIGlmKHR5cGVvZiBjb3Jkb3ZhICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgdGVsZXBob25lTnVtYmVyID0gY29yZG92YS5yZXF1aXJlKCdjb3Jkb3ZhL3BsdWdpbi90ZWxlcGhvbmVudW1iZXInKTtcbiAgICAgICAgdGVsZXBob25lTnVtYmVyLmdldChmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVmZXIucmVzb2x2ZSh7c2ltU2VyaWFsTnVtYmVyOiAnYWJjZCd9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICAgIH1cbiAgfVxufV0pXG5cbiIsIm1vZHVsZSgneWF0YXlhdC5mYWN0b3JpZXMnKVxuXG4uZmFjdG9yeSgnVXNlcicsIFsnUmF2ZW4nLCAnJHEnLCAnU2ltJywgZnVuY3Rpb24oUmF2ZW4sICRxLCBTaW0pIHtcbiAgcmV0dXJuIHtcbiAgICBjaGVja1JlZ2lzdHJhdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgU2ltLmdldERldGFpbHMoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgIFJhdmVuLmdldCgndXNlcnMvJyArIHJlc3VsdC5zaW1TZXJpYWxOdW1iZXIpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgICB1c2VyLmlkICYmIGRlZmVyLnJlc29sdmUodXNlcik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKHNpbVNlcmlhbE51bWJlciwgcGhvbmVOdW1iZXIpIHtcbiAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG5cbiAgICAgIHZhciByZWdfaW5mbyA9IHt9O1xuICAgICAgcmVnX2luZm8uc2ltX3NlcmlhbF9udW1iZXIgPSBzaW1TZXJpYWxOdW1iZXI7XG4gICAgICBpZihwaG9uZU51bWJlcikge1xuICAgICAgICByZWdfaW5mby5waG9uZV9udW1iZXIgPSBwaG9uZU51bWJlcjtcbiAgICAgIH1cblxuICAgICAgUmF2ZW4ucG9zdCgndXNlcnMnLCB7XG4gICAgICAgIHVzZXI6IHJlZ19pbmZvXG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGRlZmVyLnJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgfVxuICB9XG59XSlcblxuIiwibW9kdWxlKCd5YXRheWF0LmZhY3RvcmllcycpXG5cbi5mYWN0b3J5KCdWYWxpZGF0b3InLCBbZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgaXNWYWxpZFBob25lOiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgIHZhciBwaG9uZVJlZ0V4ID0gL15cXGR7MTB9JC87XG4gICAgICByZXR1cm4gbnVtYmVyLm1hdGNoKHBob25lUmVnRXgpO1xuICAgIH1cbiAgfVxufV0pXG5cbiIsIm1vZHVsZSgneWF0YXlhdC5jb250cm9sbGVycycpXG5cbi5jb250cm9sbGVyKCdBcHBDdHJsJywgWyckc2NvcGUnLCAnJHJvb3RTY29wZScsICdNb2RhbCcsICckdGltZW91dCcsIGZ1bmN0aW9uKCRzY29wZSwgJHJvb3RTY29wZSwgTW9kYWwsICR0aW1lb3V0KSB7XG4gIC8vIEZvcm0gZGF0YSBmb3IgdGhlIGxvZ2luIG1vZGFsXG4gICRzY29wZS5sb2dpbkRhdGEgPSB7fTtcblxuICBNb2RhbC5zZXR1cCgkc2NvcGUsICd0ZW1wbGF0ZXMvbG9naW4uaHRtbCcpO1xuXG4gICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwoKTtcbiAgfVxuXG4gIC8vIFRyaWdnZXJlZCBpbiB0aGUgbG9naW4gbW9kYWwgdG8gY2xvc2UgaXRcbiAgJHNjb3BlLmNsb3NlTG9naW4gPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuY2xvc2VNb2RhbCgpO1xuICB9O1xuXG4gIC8vIFBlcmZvcm0gdGhlIGxvZ2luIGFjdGlvbiB3aGVuIHRoZSB1c2VyIHN1Ym1pdHMgdGhlIGxvZ2luIGZvcm1cbiAgJHNjb3BlLmRvTG9naW4gPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnRG9pbmcgbG9naW4nLCAkc2NvcGUubG9naW5EYXRhKTtcblxuICAgIC8vIFNpbXVsYXRlIGEgbG9naW4gZGVsYXkuIFJlbW92ZSB0aGlzIGFuZCByZXBsYWNlIHdpdGggeW91ciBsb2dpblxuICAgIC8vIGNvZGUgaWYgdXNpbmcgYSBsb2dpbiBzeXN0ZW1cbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS5jbG9zZUxvZ2luKCk7XG4gICAgfSwgMTAwMCk7XG4gIH07XG59XSlcblxuIiwibW9kdWxlKCd5YXRheWF0LmNvbnRyb2xsZXJzJylcblxuLmNvbnRyb2xsZXIoJ1Bvc3RDdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ1Bvc3QnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcywgUG9zdCkge1xuICAkc2NvcGUucG9zdCA9IHt9O1xuXG4gIFBvc3QuZ2V0KCRzdGF0ZVBhcmFtcy5wb3N0SWQsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAkc2NvcGUucG9zdCA9IGRhdGE7XG4gIH0pO1xufV0pXG5cbiIsIm1vZHVsZSgneWF0YXlhdC5jb250cm9sbGVycycpXG5cbi5jb250cm9sbGVyKCdQb3N0c0N0cmwnLCBbJyRzY29wZScsICdQb3N0JywgZnVuY3Rpb24oJHNjb3BlLCBQb3N0KSB7XG4gICRzY29wZS5wb3N0cyA9IFtdO1xuXG4gIFBvc3QuYWxsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAkc2NvcGUucG9zdHMgPSBkYXRhO1xuICB9KTtcblxuICAkc2NvcGUubGlrZVBvc3QgPSBmdW5jdGlvbigkaW5kZXgsICRldmVudCkge1xuICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9O1xuXG4gICRzY29wZS5lZGl0UG9zdCA9IGZ1bmN0aW9uKCRpbmRleCwgJGV2ZW50KSB7XG4gICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH07XG59XSlcblxuIiwibW9kdWxlKCd5YXRheWF0LmNvbnRyb2xsZXJzJylcblxuLmNvbnRyb2xsZXIoJ1JlcG9ydEN0cmwnLCBbJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcykge1xufV0pXG5cbiIsIm1vZHVsZSgneWF0YXlhdC5jb250cm9sbGVycycpXG5cbi5jb250cm9sbGVyKCdTZWFyY2hDdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGVQYXJhbXMpIHtcbn1dKVxuXG4iLCJtb2R1bGUoJ3lhdGF5YXQuY29udHJvbGxlcnMnKVxuXG4uY29udHJvbGxlcignU3RhcnRDdHJsJyxcbiAgWyckc2NvcGUnLCAnJHJvb3RTY29wZScsICdVc2VyJywgJ1NpbScsICdNb2RhbCcsICdOYXZpZ2F0b3InLCAnTG9hZGluZycsICckaW9uaWNQb3B1cCcsICdWYWxpZGF0b3InLFxuICBmdW5jdGlvbigkc2NvcGUsICRyb290U2NvcGUsIFVzZXIsIFNpbSwgTW9kYWwsIE5hdmlnYXRvciwgTG9hZGluZywgJGlvbmljUG9wdXAsIFZhbGlkYXRvcikge1xuXG4gIE1vZGFsLnNldHVwKCRzY29wZSwgJ3RlbXBsYXRlcy90b3MuaHRtbCcpO1xuXG4gICRzY29wZS5lbnRlck1haW4gPSBmdW5jdGlvbihzaW1TZXJpYWxOdW1iZXIpIHtcbiAgICAkcm9vdFNjb3BlLnVzZXJJZCA9IHNpbVNlcmlhbE51bWJlcjtcbiAgICBOYXZpZ2F0b3IuZ28oJ2FwcC5wb3N0cycsIHRydWUpO1xuICB9O1xuXG4gIFVzZXIuY2hlY2tSZWdpc3RyYXRpb24oKVxuICAudGhlbihmdW5jdGlvbih1c2VyKSB7XG4gICAgJHNjb3BlLmVudGVyTWFpbih1c2VyLnNpbV9zZXJpYWxfbnVtYmVyKTtcbiAgfSk7XG5cbiAgJHNjb3BlLnJlZ2lzdGVyV2l0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24oc2ltU2VyaWFsTnVtYmVyLCBwaG9uZU51bWJlcikge1xuICAgIFVzZXIucmVnaXN0ZXIoc2ltU2VyaWFsTnVtYmVyLCBwaG9uZU51bWJlcilcbiAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6ICdTdWNjZXNzJyxcbiAgICAgICAgdGVtcGxhdGU6IHNpbVNlcmlhbE51bWJlciArICcgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHkuJ1xuICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLmVudGVyTWFpbihzaW1TZXJpYWxOdW1iZXIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgU2ltLmdldERldGFpbHMoKVxuICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgJHNjb3BlLnJlZ2lzdGVyV2l0aENyZWRlbnRpYWxzKHJlc3VsdC5zaW1TZXJpYWxOdW1iZXIsIHJlc3VsdC5saW5lMU51bWJlcik7XG4gICAgfSk7XG4gIH07XG59XSlcblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9